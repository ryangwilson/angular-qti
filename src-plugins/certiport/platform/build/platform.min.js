/*
* platform 0.1.0
*/
!function(a,b){b.platform=a;var c={};angular.module("platform",[],["$compileProvider","$controllerProvider",function(a,b){c.$compileProvider=a,c.$controllerProvider=b}]);var d={};d.PLATFORM_INIT="platform.events.init",d.PLATFORM_READY="platform.events.ready",d.VIEW_INIT="view.events.init",d.VIEW_READY="view.events.ready",d.PLUGIN_INIT="plugin.events.init",d.PLUGIN_READY="plugin.events.ready",function(){function a(a){this.name=a,this.config={},this.views={},this.plugins={$$cache:{}},platty.dispatcher(this)}var b={};a.prototype.init=function(a){return angular.extend(this.config,a),this},a.prototype.view=function(a,b){if("undefined"==typeof b){var c=this.views[a];if(!c)throw new Error("View not registered with name: {name}.").supplant({name:a});return c}return this.views[a]=b,this},a.prototype.registerPlugin=function(a,b){return this.plugins[a]=b,this},a.prototype.getPlugin=function(a){if(!this.plugins.$$cache[a]){var b=this.plugins[a];if(!b)throw new Error("Plugin not registered with name: {name}.").supplant({name:a});this.plugins.$$cache[a]=b()}return this.plugins.$$cache[a]},a.prototype.getViewElement=function(a,b){var c=this,d=c.view(a);b=platty.extend({},d,b);var e,f=c.renderElement(d.name,b);return angular.forEach(b.plugins,function(a){e=c.getPlugin(a.name,a.options),console.warn("THIS IS BEING REFACTORED")}),f},a.prototype.renderElement=function(a,b){var c="<{tag_name}></{tag_name}>",d=c.supplant({tag_name:a}),e=angular.element(d);return angular.forEach(b.attrs,function(a,b){e.attr(b,a)}),e},window.platform=function(c){return b[c]||(b[c]=new a(c)),b[c]}}();angular.module("platform").directive("platform",["$http","$compile","$controller",function(){return{restrict:"AE",link:function(a,b,c){var d=platform(c.name),e=function(){var a;angular.forEach(d.config.plugins,function(b){if(a=d.getPlugin(b.name,b.options),"function"!=typeof a)throw new Error("Plugin must return a function to be valid.");platty.injector("platform").invoke(a,{},{name:b.name,options:b.options,platform:d,next:function(){console.log("next called!!!")}})}),d.fire("platform.events.init",d)};d.render=function(a,c){var e=d.getViewElement(a,c);angular.bootstrap(e,["certiport"]),b.append(e);var f=e.injector(),g=f.get("$rootScope");g.$on("ready",function(){d.fire("platform.events.ready")})},e()}}}])}({},function(){return this}());